<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter15. 타임라인 격리하기 | wally-wally TIL</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="wally-wally&#39;s TIL">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/wally-wally-til/assets/css/0.styles.5b0b7f0f.css" as="style"><link rel="preload" href="/wally-wally-til/assets/js/app.f5246800.js" as="script"><link rel="preload" href="/wally-wally-til/assets/js/2.fd76ebd9.js" as="script"><link rel="preload" href="/wally-wally-til/assets/js/31.d5bfcc5a.js" as="script"><link rel="prefetch" href="/wally-wally-til/assets/js/10.d9a95bfe.js"><link rel="prefetch" href="/wally-wally-til/assets/js/11.a2a6e0bb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/12.07ea1bdf.js"><link rel="prefetch" href="/wally-wally-til/assets/js/13.1bfbaa6f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/14.90ad19d6.js"><link rel="prefetch" href="/wally-wally-til/assets/js/15.f50c2694.js"><link rel="prefetch" href="/wally-wally-til/assets/js/16.85e8420c.js"><link rel="prefetch" href="/wally-wally-til/assets/js/17.872b0e5a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/18.f1794982.js"><link rel="prefetch" href="/wally-wally-til/assets/js/19.786141e4.js"><link rel="prefetch" href="/wally-wally-til/assets/js/20.88ff03b1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/21.fd903a51.js"><link rel="prefetch" href="/wally-wally-til/assets/js/22.d215abd1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/23.44ffc4f2.js"><link rel="prefetch" href="/wally-wally-til/assets/js/24.01293f45.js"><link rel="prefetch" href="/wally-wally-til/assets/js/25.3ef63158.js"><link rel="prefetch" href="/wally-wally-til/assets/js/26.a467aa9c.js"><link rel="prefetch" href="/wally-wally-til/assets/js/27.9e7ecb66.js"><link rel="prefetch" href="/wally-wally-til/assets/js/28.2ab87b73.js"><link rel="prefetch" href="/wally-wally-til/assets/js/29.4481ba0f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/3.c603572a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/30.19fd5f37.js"><link rel="prefetch" href="/wally-wally-til/assets/js/32.5ee24aeb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/33.11913056.js"><link rel="prefetch" href="/wally-wally-til/assets/js/34.31af5972.js"><link rel="prefetch" href="/wally-wally-til/assets/js/35.9ae3b57d.js"><link rel="prefetch" href="/wally-wally-til/assets/js/36.39511f04.js"><link rel="prefetch" href="/wally-wally-til/assets/js/37.298faa13.js"><link rel="prefetch" href="/wally-wally-til/assets/js/38.04a5a190.js"><link rel="prefetch" href="/wally-wally-til/assets/js/39.02659111.js"><link rel="prefetch" href="/wally-wally-til/assets/js/4.ed8f2e2d.js"><link rel="prefetch" href="/wally-wally-til/assets/js/40.e5fe29a8.js"><link rel="prefetch" href="/wally-wally-til/assets/js/41.2e0f3c4d.js"><link rel="prefetch" href="/wally-wally-til/assets/js/42.604fb7ae.js"><link rel="prefetch" href="/wally-wally-til/assets/js/43.7be3d9b4.js"><link rel="prefetch" href="/wally-wally-til/assets/js/44.6a25a594.js"><link rel="prefetch" href="/wally-wally-til/assets/js/45.3d5db9fb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/46.f541a5fe.js"><link rel="prefetch" href="/wally-wally-til/assets/js/47.493907b1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/48.8846fba8.js"><link rel="prefetch" href="/wally-wally-til/assets/js/49.180ec634.js"><link rel="prefetch" href="/wally-wally-til/assets/js/5.16508133.js"><link rel="prefetch" href="/wally-wally-til/assets/js/50.43c8c2f2.js"><link rel="prefetch" href="/wally-wally-til/assets/js/51.cf749cf9.js"><link rel="prefetch" href="/wally-wally-til/assets/js/52.99331d67.js"><link rel="prefetch" href="/wally-wally-til/assets/js/53.efc989ab.js"><link rel="prefetch" href="/wally-wally-til/assets/js/54.6d56ccbb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/55.0c06e067.js"><link rel="prefetch" href="/wally-wally-til/assets/js/56.b45e191a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/57.961440e9.js"><link rel="prefetch" href="/wally-wally-til/assets/js/58.a3d99037.js"><link rel="prefetch" href="/wally-wally-til/assets/js/59.55d3c672.js"><link rel="prefetch" href="/wally-wally-til/assets/js/6.c7b54f12.js"><link rel="prefetch" href="/wally-wally-til/assets/js/60.1eb9e815.js"><link rel="prefetch" href="/wally-wally-til/assets/js/61.60cf2957.js"><link rel="prefetch" href="/wally-wally-til/assets/js/62.060bd05f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/63.f005f9ad.js"><link rel="prefetch" href="/wally-wally-til/assets/js/64.a7d460aa.js"><link rel="prefetch" href="/wally-wally-til/assets/js/65.083b5915.js"><link rel="prefetch" href="/wally-wally-til/assets/js/66.3f31ca88.js"><link rel="prefetch" href="/wally-wally-til/assets/js/67.affe2987.js"><link rel="prefetch" href="/wally-wally-til/assets/js/68.58b01f3c.js"><link rel="prefetch" href="/wally-wally-til/assets/js/69.c7491bbb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/7.233f38d3.js"><link rel="prefetch" href="/wally-wally-til/assets/js/70.9c9e05e7.js"><link rel="prefetch" href="/wally-wally-til/assets/js/71.67c4633a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/72.66a1fbf9.js"><link rel="prefetch" href="/wally-wally-til/assets/js/73.cc121e7e.js"><link rel="prefetch" href="/wally-wally-til/assets/js/74.b71f297f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/75.24c397b2.js"><link rel="prefetch" href="/wally-wally-til/assets/js/8.f792d4e1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/9.897445a3.js">
    <link rel="stylesheet" href="/wally-wally-til/assets/css/0.styles.5b0b7f0f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wally-wally-til/" class="home-link router-link-active"><img src="/wally-wally-til/logo.png" alt="wally-wally TIL" class="logo"> <span class="site-name can-hide">wally-wally TIL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wally-wally-til/til/" class="nav-link router-link-active">
  TIL
</a></div><div class="nav-item"><a href="/wally-wally-til/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://wally-wally.kr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  wally-wally
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wally-wally-til/til/" class="nav-link router-link-active">
  TIL
</a></div><div class="nav-item"><a href="/wally-wally-til/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://wally-wally.kr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  wally-wally
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS Deep Dive</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Effective TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Refactoring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Functional Coding</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wally-wally-til/til/functional-coding/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter01.html" class="sidebar-link">Chapter01</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter02.html" class="sidebar-link">Chapter02</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter03.html" class="sidebar-link">Chapter03</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter04.html" class="sidebar-link">Chapter04</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter05.html" class="sidebar-link">Chapter05</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter06.html" class="sidebar-link">Chapter06</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter13.html" class="sidebar-link">Chapter13</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter14.html" class="sidebar-link">Chapter14</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter15.html" aria-current="page" class="active sidebar-link">Chapter15</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter15.html#_1-타임라인-다이어그램-기본-규칙" class="sidebar-link">1. 타임라인 다이어그램 기본 규칙</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter15.html#_2-서로-다른-언어-서로-다른-스레드-모델" class="sidebar-link">2. 서로 다른 언어, 서로 다른 스레드 모델</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter15.html#_3-타임라인-다이어그램으로-알-수-있는-것" class="sidebar-link">3. 타임라인 다이어그램으로 알 수 있는 것</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter15.html#_4-좋은-타임라인의-원칙" class="sidebar-link">4. 좋은 타임라인의 원칙</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter15.html#_5-자바스크립트의-이모저모" class="sidebar-link">5. 자바스크립트의 이모저모</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter15.html#_6-타임라인-단순화하기" class="sidebar-link">6. 타임라인 단순화하기</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter15.html#지금까지-내용-요약-정리" class="sidebar-link">📌 지금까지 내용 요약 정리</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter15.html#_7-자원을-공유하는-타임라인은-문제가-생길-수-있습니다" class="sidebar-link">7. 자원을 공유하는 타임라인은 문제가 생길 수 있습니다</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter15.html#_8-비동기-호출에서-명시적인-출력을-위해-리턴값-대신-콜백을-사용할-수-있다" class="sidebar-link">8. 비동기 호출에서 명시적인 출력을 위해 리턴값 대신 콜백을 사용할 수 있다</a></li></ul></li><li><a href="/wally-wally-til/til/functional-coding/chapter16.html" class="sidebar-link">Chapter16</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter17.html" class="sidebar-link">Chapter17</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter18.html" class="sidebar-link">Chapter18</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chapter15-타임라인-격리하기"><a href="#chapter15-타임라인-격리하기" class="header-anchor">#</a> Chapter15. 타임라인 격리하기</h1> <br> <h2 id="_1-타임라인-다이어그램-기본-규칙"><a href="#_1-타임라인-다이어그램-기본-규칙" class="header-anchor">#</a> 1. 타임라인 다이어그램 기본 규칙</h2> <ul><li>기본 규칙
<ul><li>두 액션이 순서대로 나타나면 같은 타임라인에 넣는다.</li> <li>두 액션이 동시에 실행되거나 순서를 예상할 수 없다면 분리된 타임라인에 넣는다.</li></ul></li> <li>요약
<ul><li>액션은 순서대로 실행되거나 동시에 실행된다.</li> <li>순서대로 실행되는 액션은 같은 타임라인에서 하나가 끝나면 다른 하나가 실행된다.</li> <li>동시에 실행되는 액션은 여러 타임라인에서 나란히 실행된다.</li></ul></li> <li>놓치기 쉬운 액션 순서에 관한 두 가지 사실
<ul><li><code>++</code>, <code>+=</code>는 사실 세 단계이다.
<ul><li>읽기(액션), 더하기(계산), 쓰기(액션)으로 분리된다.</li></ul></li> <li>인자는 함수를 부르기 전에 실행한다.</li></ul></li> <li>타임라인 다이어그램 그리는 단계
<ul><li>액션을 확인한다.</li> <li>순서대로 실행되거나 동시에 실행되는 액션을 그린다.</li> <li>플랫폼에 특화된 지식을 사용해 다이어그램을 단순하게 만든다.</li></ul></li></ul> <br> <h2 id="_2-서로-다른-언어-서로-다른-스레드-모델"><a href="#_2-서로-다른-언어-서로-다른-스레드-모델" class="header-anchor">#</a> 2. 서로 다른 언어, 서로 다른 스레드 모델</h2> <ul><li>단일 스레드, 동기
<ul><li>기본적으로 멀티스레드를 지원하지 않는 언어도 있다.</li> <li>예를 들어 PHP는 기본적으로 멀티스레드를 사용할 수 없다.</li> <li>모든 것이 순서대로 실행되고 입출력을 사용하면 끝날 때까지 기다려야 한다.</li> <li>하지만 이런 제약은 시스템이 단순하다는 장점이기도 하다.</li> <li>스레드가 하나면 타임라인도 하나이지만, 네트워크를 통한 API 호출 같은 것은 다른 타임라인이 필요하다.</li> <li>하지만 메모리를 공유하지 않기 때문에 공유 자원을 많이 없앨 수 있다.</li></ul></li> <li>단일 스레드, 비동기
<ul><li>자바스크립트는 스레드가 하나이다.</li> <li>입출력 작업을 하려면 비동기 모델을 사용해야 한다.</li> <li>입출력의 결과는 콜백으로 받을 수 있지만, 언제 끝날지 알 수 없으므로 다른 타임라인에 표현해야 한다.</li></ul></li> <li>멀티스레드
<ul><li>자바나 파이썬, 루비, C, C#과 같은 많은 언어가 멀티스레드를 지원한다.</li> <li>멀티스레드는 실행 순서를 보장하지 않기 때문에 프로그래밍하기 매우 어렵다.</li> <li>새로운 스레드가 생기면 새로운 타임라인을 그려야 한다.</li></ul></li> <li>메시지 패싱 프로세스
<ul><li>엘릭서나 얼랭 같은 언어는 서로 다른 프로세스를 동시에 실행할 수 있는 스레드 모델을 지원한다.</li> <li>프로세스는 서로 메모리를 공유하지 않고 메시지로 통신한다.</li> <li>서로 다른 타임라인에 있는 액션은 순서가 섞이지만, 메모리를 공유하지 않기 때문에 가능한 실행 순서가 많아도 문제가 되지 않는다.</li></ul></li></ul> <br> <h2 id="_3-타임라인-다이어그램으로-알-수-있는-것"><a href="#_3-타임라인-다이어그램으로-알-수-있는-것" class="header-anchor">#</a> 3. 타임라인 다이어그램으로 알 수 있는 것</h2> <h3 id="_1-순서대로-실행되는-코드에도-두-가지-종류가-있다"><a href="#_1-순서대로-실행되는-코드에도-두-가지-종류가-있다" class="header-anchor">#</a> (1) 순서대로 실행되는 코드에도 두 가지 종류가 있다.</h3> <ul><li>순서가 섞일 수 있는 코드
<ul><li>두 액션 사이에 시간은 얼마나 걸릴지 알 수 없다.</li> <li>액션은 박스로 표시하고 액션 사이에 걸리는 시간은 선으로 표시한다.</li> <li>그래서 액션과 액션 사이에 걸리는 시간에 따라 선을 길게 그릴 수도 있고 짧게 그릴 수도 있다.</li> <li>그렇다고 해도 두 액션 사이에 시간이 얼마나 걸릴 지 알 수 없다.</li> <li>그러므로 다른 타임라인의 액션과 순서가 섞일 수 있다.</li></ul></li> <li>순서가 섞이지 않는 코드
<ul><li>어떤 경우에는 두 액션이 차례로 실행되는데 그 사이에 다른 작업이 끼어들지 못한다.</li> <li>런타임이 원래 해주거나 프로그래밍을 잘해서 만들 수 있다.</li> <li>이런 경우는 액션을 같은 상자에 그린다.</li></ul></li></ul> <br> <h3 id="_2-동시에-실행되는-코드는-순서를-예측할-수-없다"><a href="#_2-동시에-실행되는-코드는-순서를-예측할-수-없다" class="header-anchor">#</a> (2) 동시에 실행되는 코드는 순서를 예측할 수 없다.</h3> <ul><li>동시에 실행되는 코드는 타임라인 다이어그램에 나란히 표현한다.</li> <li>다이어그램에 나란히 표현되지만 두 액션이 항상 정확히 동시에 실행된다는 의미는 아니다.</li> <li>타임라인에서 나란히 표현된 액션은 아래와 같이 세 가지 실행 순서를 가질 수 있다.
<ul><li>동시에 실행, 왼쪽 먼저, 오른쪽 먼저</li></ul></li> <li>타임라인 다이어그램을 볼 때 선의 길이나 액션이 정렬된 위치와 상관없이 위와 같은 순서가 가능하다고 생각해야 한다.</li> <li>실행 가능한 순서는 문제가 될 수 있기 때문에 예상할 수 있어야 한다.
<ul><li>그래서 어떤 경우에는 명확한 설명을 위해 특정 순서를 강조해서 그릴 수도 있다.</li></ul></li> <li>여러 개의 타임라인은 시간에 따라 다양한 방식으로 실행될 수 있다.
<ul><li>타임라인이 실행 가능한 방법을 가능한 순서(possible ordering)라고 한다.</li> <li>타임라인이 하나라면 실행 가능한 순서는 하나이다.</li></ul></li></ul> <br> <h2 id="_4-좋은-타임라인의-원칙"><a href="#_4-좋은-타임라인의-원칙" class="header-anchor">#</a> 4. 좋은 타임라인의 원칙</h2> <blockquote><p>실행 가능한 순서가 많다면 시스템을 이해하기 어렵다!</p></blockquote> <h3 id="_1-타임라인은-적을수록-이해하기-쉽다"><a href="#_1-타임라인은-적을수록-이해하기-쉽다" class="header-anchor">#</a> (1) 타임라인은 적을수록 이해하기 쉽다.</h3> <ul><li>타임라인이 하나인 시스템이 가장 이해하기 쉽다.</li> <li>타임라인이 하나라면 모든 액션은 앞의 액션 다음에 바로 실행된다.</li> <li>하지만 요즘 시스템에는 여러 타임라인이 필요하다.</li> <li>멀티스레드나 비동기 콜배그 클라이언트-서버 간 통신 등을 사용하려면 새로운 타임라인이 필요하다.</li> <li>타임라인 수를 줄인다면 훨씬 이해하기 쉬운 시스템이 된다.</li> <li>하지만 항상 타임라인 수를 마음대로 조정할 수는 없다.</li></ul> <br> <h3 id="_2-타임라인은-짧을수록-이해하기-쉽다"><a href="#_2-타임라인은-짧을수록-이해하기-쉽다" class="header-anchor">#</a> (2) 타임라인은 짧을수록 이해하기 쉽다.</h3> <ul><li>타임라인을 이해하기 쉽게 만드는 또 다른 방법은 타임라인의 단계를 줄이는 것이다.</li> <li>단계를 줄인다면 실행 가능한 순서의 수도 많이 줄일 수 있다.</li></ul> <br> <h3 id="_3-공유하는-자원이-적을수록-이해하기-쉽다"><a href="#_3-공유하는-자원이-적을수록-이해하기-쉽다" class="header-anchor">#</a> (3) 공유하는 자원이 적을수록 이해하기 쉽다.</h3> <ul><li>서로 다른 타임라인에 있는 두 액션이 서로 자원을 공유하지 않는다면 실행 순서에 신경 쓸 필요가 없다.</li> <li>실행 가능한 순서의 개수가 줄어들지는 않지만, 신경 써야 할 실행 가능한 순서를 줄일 수 있다.</li> <li>타임라인이 두 개 있다면 서로 자원을 공유하는 액션을 주의 깊게 봐야 한다.</li></ul> <br> <h3 id="_4-자원을-공유한다면-서로-조율해야-한다"><a href="#_4-자원을-공유한다면-서로-조율해야-한다" class="header-anchor">#</a> (4) 자원을 공유한다면 서로 조율해야 한다.</h3> <ul><li>공유 자원을 많이 없앤다고 해도 여전히 없앨 수 없는 공유 자원이 남는다.</li> <li>타임라인은 공유 자원을 안전하게 공유할 수 있어야 한다.</li> <li>안전하게 공유한다는 말은 올바른 순서대로 자원을 쓰고 돌려준다는 말이다.</li> <li>타임라인 간 조율은 올바른 결과를 주지 않는 실행 순서를 없애는 것을 말한다.</li></ul> <br> <h3 id="_5-시간을-일급으로-다룬다"><a href="#_5-시간을-일급으로-다룬다" class="header-anchor">#</a> (5) 시간을 일급으로 다룬다.</h3> <ul><li>액션의 순서와 타이밍을 맞추는 것은 어렵다.</li> <li>타임라인 다루는 재사용 가능한 객체를 만들면 타이밍 문제를 쉽게 만들 수 있다.</li></ul> <br> <h2 id="_5-자바스크립트의-이모저모"><a href="#_5-자바스크립트의-이모저모" class="header-anchor">#</a> 5. 자바스크립트의 이모저모</h2> <h3 id="_1-자바스크립트의-단일-스레드"><a href="#_1-자바스크립트의-단일-스레드" class="header-anchor">#</a> (1) 자바스크립트의 단일 스레드</h3> <ul><li>자바스크립트는 스레드가 하나이다.</li> <li>전역변수를 바꾸는 동기 액션은 타임라인이 서로 섞이지 않는다.</li> <li>비동기 호출은 미래에 알 수 없는 시점에 런타임에 의해 실행된다.</li> <li>두 동기 액션은 동시에 실행되지 않는다.</li></ul> <br> <h3 id="_2-자바스크립트의-비동기-큐"><a href="#_2-자바스크립트의-비동기-큐" class="header-anchor">#</a> (2) 자바스크립트의 비동기 큐</h3> <blockquote><p>자바스크립트의 이벤트 루프 관련 참고 페이지 (<a href="https://github.com/wally-wally/TIL/blob/master/10_tech_interview/06_Javascript/11_%EC%9D%B4%EB%B2%A4%ED%8A%B8_%EB%A3%A8%ED%94%84.md" target="_blank" rel="noopener noreferrer">바로 가기<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p></blockquote> <ul><li>기본 개념
<ul><li>브라우저에서 동작하는 자바스크립트 엔진은 작업 큐(job queue)라고 하는 큐를 가지고 있다.</li> <li>작업 큐는 이벤트 루프(event loop)에 의해 처리된다.</li> <li>이벤트 루프는 큐에서 작업 하나를 꺼내 실행하고 완료되면 다음 작업을 꺼내 실행하는 것을 무한히 반복한다.</li> <li>이벤트 루프는 하나의 스레드에서 처리하기 때문에 두 개의 작업이 동시에 실행될 수 없다.</li></ul></li> <li>작업이란?
<ul><li>작업 큐에 있는 작업은 이벤트 데이터와 이벤트를 처리할 콜백으로 구성되어 있다.</li> <li>이벤트 루프는 이벤트 데이터를 인자로 콜백을 부른다.</li> <li>콜백은 이벤트 루프가 실행할 함수다.</li> <li>이벤트 루프는 단순히 첫 번째 인자에 이벤트 데이터를 넣어 콜백 함수를 실행한다.</li></ul></li> <li>작업은 큐에 어떻게 들어가는가
<ul><li>이벤트가 발생하면 큐에 작업이 추가된다.</li> <li>이벤트는 마우스 클릭이나 키보드 입력, AJAX 이벤트 같은 것을 말한다.</li> <li>만약 콜백 함수가 있는 버튼에 이벤트가 발생하면 콜백 함수와 이벤트 데이터가 큐에 추가된다.</li> <li>마우스 클릭처럼 어떤 이벤트도 예상할 수 없기 때문에 이벤트는 예측 불가능한 시점에 작업 큐에 들어간다.</li> <li>들어간 작업은 작업 큐에서 나중에 온전히 가져온다.</li></ul></li> <li>작업이 없을 때 엔진은 무엇을 하는가
<ul><li>처리할 작업이 없는 경우도 있다.</li> <li>이벤트 루프는 대기 상태로 들어가고 전원을 아낀다.</li> <li>또는 가비지 컬렉션 같은 관리 작업을 하기도 한다.</li> <li>이것은 브라우저 개발자에게 달려있다.</li></ul></li></ul> <br> <h3 id="_3-ajax와-이벤트-큐"><a href="#_3-ajax와-이벤트-큐" class="header-anchor">#</a> (3) AJAX와 이벤트 큐</h3> <ul><li>기본 개념
<ul><li>자바스크립트에서 AJAX 요청을 만들면 네트워크 엔진이 AJAX 요청을 처리하기 위해 요청 큐에 넣는다.</li> <li>요청 큐에 작업이 추가되어도 코드는 계속 실행된다.</li> <li>요청이 완료될 때까지 기다릴 필요가 없다.</li> <li>많은 언어가 요청이 완료되어야 다음 코드를 진행할 수 있는 동기 요청 방식이지만 자바스크립트에서 AJAX를 사용하는 부분은 비동기이다.</li> <li>네트워크 환경은 예측할 수 없기 때문에 응답은 요청 순서대로 오지 않는다.</li> <li>AJAX 콜백도 요청 순서와 상관없이 작업 큐에 들어간다.</li></ul></li> <li>요청에 대한 응답을 기다리지 않으면 응답을 어떻게 받는가
<ul><li>AJAX 요청을 만들 때 요청에 관련된 다양한 이벤트 콜백을 등록할 수 있다.</li> <li>요청이 처리되는 동안 네트워크 엔진에 의해 다양한 이벤트가 발생한다.</li> <li>많이 사용하는 이벤트는<code>load</code>와 <code>error</code>이다.</li> <li><code>load</code>는 응답이 모두 다운로드 되었을 때 발생하는 이벤트, <code>error</code>는 뭔가 잘못된 경우에 발생한다.</li></ul></li></ul> <br> <h2 id="_6-타임라인-단순화하기"><a href="#_6-타임라인-단순화하기" class="header-anchor">#</a> 6. 타임라인 단순화하기</h2> <ul><li>자바스크립트에서 단순화하는 방법
<ul><li>하나의 타임라인에 있는 모든 액션을 하나로 통합한다.
<ul><li>자바스크립트는 스레드가 하나이기 때문에 액션은 순서가 섞이지 않고 하나의 타임라인에서 실행된다.</li> <li>타임라인은 다른 타임라인이 실행되기 전에 완료된다.</li> <li>다이어그램에 점선이 있다면 타임라인 끝으로 옮긴다.</li></ul></li> <li>타임라인이 끝나는 곳에서 새로운 타임라인이 하나 생긴다면 통합한다.</li></ul></li></ul> <br> <h2 id="지금까지-내용-요약-정리"><a href="#지금까지-내용-요약-정리" class="header-anchor">#</a> 📌 지금까지 내용 요약 정리</h2> <h3 id="_1-액션을-확인하기"><a href="#_1-액션을-확인하기" class="header-anchor">#</a> (1) 액션을 확인하기</h3> <ul><li>모든 액션은 타임라인에 표시되어야 한다.</li> <li>복합적인 액션도 있으므로 변수를 읽고 쓰는 것처럼 하나의 액션처럼 보이지만 여러 액션으로 되어 있는 액션을 하나의 액션으로 파악하기 위해 주의 깊게 봐야 한다.</li></ul> <br> <h3 id="_2-액션을-그리기"><a href="#_2-액션을-그리기" class="header-anchor">#</a> (2) 액션을 그리기</h3> <ul><li>순서대로 실행되는 액션: 하나가 끝나고 다음이 시작
<ul><li>순서대로 실행되는 액션은 같은 타임라인에 표시한다.</li></ul></li> <li>동시에 실행되는 액션: 동시에 실행되거나 왼쪽 먼저 또는 오른쪽 먼저 실행
<ul><li>동시에 실행되거나 순서가 섞여서 실행되는 겨우 분리된 타임라인으로 표시한다.</li> <li>비동기 콜백, 멀티 프로세스, 멀티스레드, 여러 장치 등의 경우에 액션이 동시에 실행될 수 있다.</li> <li>모든 액션을 그린 후 실행 순서를 제한하기 위해 점선을 사용할 수 있다.
<ul><li>예를 들어 ajax 콜백은 ajax 요청 전에 실행할 수 없다.</li></ul></li></ul></li></ul> <br> <h3 id="_3-타임라인을-단순화하기"><a href="#_3-타임라인을-단순화하기" class="header-anchor">#</a> (3) 타임라인을 단순화하기</h3> <ul><li>순서가 섞이지 않는 두 액션은 하나의 박스로 합친다.</li> <li>타임라인 끝에서 새로운 타임라인이 하나만 생긴다면 하나로 합친다.</li> <li>순서에 제약이 있는 경우 점선을 추가한다.</li></ul> <br> <h3 id="_4-타임라인-읽기"><a href="#_4-타임라인-읽기" class="header-anchor">#</a> (4) 타임라인 읽기</h3> <ul><li>일반적으로 서로 다른 타임라인에 있는 액션은 세 가지 순서로 실행될 수 있다.
<ul><li>동시에 실행되거나 왼쪽이 먼저 실행되거나 오른쪽이 먼저 실행될 수 있다.</li> <li>이런 경우 실행 순서는 불가능하거나 기대한 대로이거나 잘못된 결과를 가져올 수 있다.</li></ul></li></ul> <br> <h2 id="_7-자원을-공유하는-타임라인은-문제가-생길-수-있습니다"><a href="#_7-자원을-공유하는-타임라인은-문제가-생길-수-있습니다" class="header-anchor">#</a> 7. 자원을 공유하는 타임라인은 문제가 생길 수 있습니다</h2> <ul><li>공유하는 자원을 없애 문제를 해결할 수 있다.
<ul><li>두 타임라인이 같은 전역변수를 사용하면 실행 순서가 섞인 상태에서도 각 타임라인이 전역변수에 접근할 수 있어 문제가 생길 수 있다.</li> <li>그래서 이러한 전역변수를 지역변수로 바꾸는 것이 좋다.</li> <li>혹은 전역변수에 접근하는 부분을 함수의 인자로 바꿔 해결할 수 있다.</li></ul></li></ul> <br> <h2 id="_8-비동기-호출에서-명시적인-출력을-위해-리턴값-대신-콜백을-사용할-수-있다"><a href="#_8-비동기-호출에서-명시적인-출력을-위해-리턴값-대신-콜백을-사용할-수-있다" class="header-anchor">#</a> 8. 비동기 호출에서 명시적인 출력을 위해 리턴값 대신 콜백을 사용할 수 있다</h2> <ul><li>비동기 호출에서 결괏값을 리턴값으로 줄 수 없다.</li> <li>비동기 호출은 바로 리턴이 되지만 결괏값은 콜백이 호출되어야 얻을 수 있기 때문이다.</li> <li>비동기 호출해서 결과를 받을 수 있는 방법은 콜백을 사용하는 것이다.</li> <li>결과가 준비되었을 때 결과를 인자에 넣어 콜백을 호출한다.</li> <li>동기화된 함수에서 액션을 빼낼 때 액션을 호출하는 대신 액션에 넘기는 인잣값을 리턴했다.</li> <li>그리고 호출하는 곳에서 리턴값을 받아 액션을 호출했다.</li> <li>비동기 함수에서는 리턴값대신 콜백을 사용한다.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/wally-wally-til/til/functional-coding/chapter14.html" class="prev">
        Chapter14
      </a></span> <span class="next"><a href="/wally-wally-til/til/functional-coding/chapter16.html">
        Chapter16
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/wally-wally-til/assets/js/app.f5246800.js" defer></script><script src="/wally-wally-til/assets/js/2.fd76ebd9.js" defer></script><script src="/wally-wally-til/assets/js/31.d5bfcc5a.js" defer></script>
  </body>
</html>
