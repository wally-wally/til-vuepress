<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter04. 액션에서 계산 빼내기 | wally-wally TIL</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="wally-wally&#39;s TIL">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/wally-wally-til/assets/css/0.styles.5b0b7f0f.css" as="style"><link rel="preload" href="/wally-wally-til/assets/js/app.f5246800.js" as="script"><link rel="preload" href="/wally-wally-til/assets/js/2.fd76ebd9.js" as="script"><link rel="preload" href="/wally-wally-til/assets/js/26.a467aa9c.js" as="script"><link rel="prefetch" href="/wally-wally-til/assets/js/10.d9a95bfe.js"><link rel="prefetch" href="/wally-wally-til/assets/js/11.a2a6e0bb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/12.07ea1bdf.js"><link rel="prefetch" href="/wally-wally-til/assets/js/13.1bfbaa6f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/14.90ad19d6.js"><link rel="prefetch" href="/wally-wally-til/assets/js/15.f50c2694.js"><link rel="prefetch" href="/wally-wally-til/assets/js/16.85e8420c.js"><link rel="prefetch" href="/wally-wally-til/assets/js/17.872b0e5a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/18.f1794982.js"><link rel="prefetch" href="/wally-wally-til/assets/js/19.786141e4.js"><link rel="prefetch" href="/wally-wally-til/assets/js/20.88ff03b1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/21.fd903a51.js"><link rel="prefetch" href="/wally-wally-til/assets/js/22.d215abd1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/23.44ffc4f2.js"><link rel="prefetch" href="/wally-wally-til/assets/js/24.01293f45.js"><link rel="prefetch" href="/wally-wally-til/assets/js/25.3ef63158.js"><link rel="prefetch" href="/wally-wally-til/assets/js/27.9e7ecb66.js"><link rel="prefetch" href="/wally-wally-til/assets/js/28.2ab87b73.js"><link rel="prefetch" href="/wally-wally-til/assets/js/29.4481ba0f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/3.c603572a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/30.19fd5f37.js"><link rel="prefetch" href="/wally-wally-til/assets/js/31.d5bfcc5a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/32.5ee24aeb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/33.11913056.js"><link rel="prefetch" href="/wally-wally-til/assets/js/34.31af5972.js"><link rel="prefetch" href="/wally-wally-til/assets/js/35.9ae3b57d.js"><link rel="prefetch" href="/wally-wally-til/assets/js/36.39511f04.js"><link rel="prefetch" href="/wally-wally-til/assets/js/37.298faa13.js"><link rel="prefetch" href="/wally-wally-til/assets/js/38.04a5a190.js"><link rel="prefetch" href="/wally-wally-til/assets/js/39.02659111.js"><link rel="prefetch" href="/wally-wally-til/assets/js/4.ed8f2e2d.js"><link rel="prefetch" href="/wally-wally-til/assets/js/40.e5fe29a8.js"><link rel="prefetch" href="/wally-wally-til/assets/js/41.2e0f3c4d.js"><link rel="prefetch" href="/wally-wally-til/assets/js/42.604fb7ae.js"><link rel="prefetch" href="/wally-wally-til/assets/js/43.7be3d9b4.js"><link rel="prefetch" href="/wally-wally-til/assets/js/44.6a25a594.js"><link rel="prefetch" href="/wally-wally-til/assets/js/45.3d5db9fb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/46.f541a5fe.js"><link rel="prefetch" href="/wally-wally-til/assets/js/47.493907b1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/48.8846fba8.js"><link rel="prefetch" href="/wally-wally-til/assets/js/49.180ec634.js"><link rel="prefetch" href="/wally-wally-til/assets/js/5.16508133.js"><link rel="prefetch" href="/wally-wally-til/assets/js/50.43c8c2f2.js"><link rel="prefetch" href="/wally-wally-til/assets/js/51.cf749cf9.js"><link rel="prefetch" href="/wally-wally-til/assets/js/52.99331d67.js"><link rel="prefetch" href="/wally-wally-til/assets/js/53.efc989ab.js"><link rel="prefetch" href="/wally-wally-til/assets/js/54.6d56ccbb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/55.0c06e067.js"><link rel="prefetch" href="/wally-wally-til/assets/js/56.b45e191a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/57.961440e9.js"><link rel="prefetch" href="/wally-wally-til/assets/js/58.a3d99037.js"><link rel="prefetch" href="/wally-wally-til/assets/js/59.55d3c672.js"><link rel="prefetch" href="/wally-wally-til/assets/js/6.c7b54f12.js"><link rel="prefetch" href="/wally-wally-til/assets/js/60.1eb9e815.js"><link rel="prefetch" href="/wally-wally-til/assets/js/61.60cf2957.js"><link rel="prefetch" href="/wally-wally-til/assets/js/62.060bd05f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/63.f005f9ad.js"><link rel="prefetch" href="/wally-wally-til/assets/js/64.a7d460aa.js"><link rel="prefetch" href="/wally-wally-til/assets/js/65.083b5915.js"><link rel="prefetch" href="/wally-wally-til/assets/js/66.3f31ca88.js"><link rel="prefetch" href="/wally-wally-til/assets/js/67.affe2987.js"><link rel="prefetch" href="/wally-wally-til/assets/js/68.58b01f3c.js"><link rel="prefetch" href="/wally-wally-til/assets/js/69.c7491bbb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/7.233f38d3.js"><link rel="prefetch" href="/wally-wally-til/assets/js/70.9c9e05e7.js"><link rel="prefetch" href="/wally-wally-til/assets/js/71.67c4633a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/72.66a1fbf9.js"><link rel="prefetch" href="/wally-wally-til/assets/js/73.cc121e7e.js"><link rel="prefetch" href="/wally-wally-til/assets/js/74.b71f297f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/75.24c397b2.js"><link rel="prefetch" href="/wally-wally-til/assets/js/8.f792d4e1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/9.897445a3.js">
    <link rel="stylesheet" href="/wally-wally-til/assets/css/0.styles.5b0b7f0f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wally-wally-til/" class="home-link router-link-active"><img src="/wally-wally-til/logo.png" alt="wally-wally TIL" class="logo"> <span class="site-name can-hide">wally-wally TIL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wally-wally-til/til/" class="nav-link router-link-active">
  TIL
</a></div><div class="nav-item"><a href="/wally-wally-til/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://wally-wally.kr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  wally-wally
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wally-wally-til/til/" class="nav-link router-link-active">
  TIL
</a></div><div class="nav-item"><a href="/wally-wally-til/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://wally-wally.kr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  wally-wally
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS Deep Dive</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Effective TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Refactoring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Functional Coding</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wally-wally-til/til/functional-coding/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter01.html" class="sidebar-link">Chapter01</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter02.html" class="sidebar-link">Chapter02</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter03.html" class="sidebar-link">Chapter03</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter04.html" aria-current="page" class="active sidebar-link">Chapter04</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter04.html#_1-함수에는-입력과-출력이-있습니다" class="sidebar-link">1. 함수에는 입력과 출력이 있습니다</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter04.html#_2-테스트와-재사용성-측면에서-코드-설계하기" class="sidebar-link">2. 테스트와 재사용성 측면에서 코드 설계하기</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter04.html#_3-실제-예제" class="sidebar-link">3. 실제 예제</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter04.html#_4-계산-추출을-단계별로-알아보기" class="sidebar-link">4. 계산 추출을 단계별로 알아보기</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/functional-coding/chapter04.html#정리" class="sidebar-link">❗️ 정리</a></li></ul></li><li><a href="/wally-wally-til/til/functional-coding/chapter05.html" class="sidebar-link">Chapter05</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter06.html" class="sidebar-link">Chapter06</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter13.html" class="sidebar-link">Chapter13</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter14.html" class="sidebar-link">Chapter14</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter15.html" class="sidebar-link">Chapter15</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter16.html" class="sidebar-link">Chapter16</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter17.html" class="sidebar-link">Chapter17</a></li><li><a href="/wally-wally-til/til/functional-coding/chapter18.html" class="sidebar-link">Chapter18</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chapter04-액션에서-계산-빼내기"><a href="#chapter04-액션에서-계산-빼내기" class="header-anchor">#</a> Chapter04. 액션에서 계산 빼내기</h1> <br> <h2 id="_1-함수에는-입력과-출력이-있습니다"><a href="#_1-함수에는-입력과-출력이-있습니다" class="header-anchor">#</a> 1. 함수에는 입력과 출력이 있습니다</h2> <ul><li>어떤 함수 안에 액션이 하나만 있어도 그 함수 전체가 액션이 된다.</li> <li>함수에 암묵적 입력과 출력이 있으면 액션이 된다.
<ul><li>여기서 암묵적 입력과 출력을 '부수 효과'라고 부른다.</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">add_to_total</span><span class="token punctuation">(</span><span class="token parameter">amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 인자는 명시적 입력</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Old total: '</span> <span class="token operator">+</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 전역변수를 읽는 것은 암묵적 입력이고, 콘솔에 찍는 것은 암묵적 출력</span>
  total <span class="token operator">+=</span> amount<span class="token punctuation">;</span> <span class="token comment">// 전역변수를 바꾸는 것도 암묵적 출력</span>
  <span class="token keyword">return</span> total<span class="token punctuation">;</span> <span class="token comment">// 함수의 리턴값은 명시적 출력</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h2 id="_2-테스트와-재사용성-측면에서-코드-설계하기"><a href="#_2-테스트와-재사용성-측면에서-코드-설계하기" class="header-anchor">#</a> 2. 테스트와 재사용성 측면에서 코드 설계하기</h2> <h3 id="_1-dom-업데이트와-비즈니스-규칙은-분리되어야-한다"><a href="#_1-dom-업데이트와-비즈니스-규칙은-분리되어야-한다" class="header-anchor">#</a> (1) DOM 업데이트와 비즈니스 규칙은 분리되어야 한다.</h3> <ul><li>DOM을 업데이트하는 일은 함수에서 어떤 정보가 나오는 것이기 때문에 출력이다.</li> <li>하지만 리턴값이 아니므로 암묵적 출력이고 이러한 DOM 업데이트는 어디선가 해야 한다.</li></ul> <br> <h3 id="_2-전역변수가-없어야-하며-전역변수에-의존하지-않아야-한다"><a href="#_2-전역변수가-없어야-하며-전역변수에-의존하지-않아야-한다" class="header-anchor">#</a> (2) 전역변수가 없어야 하며 전역변수에 의존하지 않아야 한다.</h3> <ul><li>전역변수를 읽는 것은 암묵적 입력이고 바꾸는 것은 암묵적 출력이다.</li> <li><b>암묵적 인자는 함수의 인자로, 암묵적 출력은 함수의 리턴값으로 바꾸면 된다.</b></li></ul> <br> <h3 id="_3-dom을-사용할-수-있는-곳에서-실행된다고-가정하면-안-된다"><a href="#_3-dom을-사용할-수-있는-곳에서-실행된다고-가정하면-안-된다" class="header-anchor">#</a> (3) DOM을 사용할 수 있는 곳에서 실행된다고 가정하면 안 된다.</h3> <ul><li>특정 환경에서만 실행되는 함수를 만드는 것은 가급적 피해야 한다.</li> <li>항상 늘 DOM 요소에 접근할 수 있는 환경이 아닐 수 있다.</li> <li>그리고 DOM을 직접 쓰는 행위는 암묵적 출력인데 이는 함수의 리턴값으로 바꿀 수 있다.</li></ul> <br> <h2 id="_3-실제-예제"><a href="#_3-실제-예제" class="header-anchor">#</a> 3. 실제 예제</h2> <h3 id="_1-예제-1"><a href="#_1-예제-1" class="header-anchor">#</a> (1) 예제 1</h3> <ul><li>before</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">calc_cart_total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  shopping_cart_total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 암묵적 출력</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> shopping_cart<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 암묵적 입력</span>
    <span class="token keyword">var</span> item <span class="token operator">=</span> shopping_cart<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    shopping_cart_total <span class="token operator">+=</span> item<span class="token punctuation">.</span>price<span class="token punctuation">;</span> <span class="token comment">// 암묵적 출력</span>
  <span class="token punctuation">}</span>
    
  <span class="token function">set_cart_total_dom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">update_shipping_icons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">update_tax_dom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>after
<ul><li>전역변수 대신 지역변수를 사용하도록 바꾸고 지역변숫값을 리턴하도록 고친다.</li> <li>그리고 원래 함수는 새 함수의 리턴값을 받아 전역변수에 할당한다.</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">calc_cart_total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  shopping_cart_total <span class="token operator">=</span> <span class="token function">calc_total</span><span class="token punctuation">(</span>shopping_cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">set_cart_total_dom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">update_shipping_icons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">update_tax_dom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">calc_total</span><span class="token punctuation">(</span><span class="token parameter">cart</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cart<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> item <span class="token operator">=</span> cart<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    total <span class="token operator">+=</span> item<span class="token punctuation">.</span>price<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> total<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h3 id="_2-예제-2"><a href="#_2-예제-2" class="header-anchor">#</a> (2) 예제 2</h3> <ul><li>before</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add_item_to_cart</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 전역변수인 shopping_cart를 읽으면 함수가 안으로 데이터가 들어오기 때문에 암묵적 입력</span>
  <span class="token comment">// push() 함수로 전역 배열을 바꿔 함수 밖으로 데이터가 나가기 때문에 암묵적 출력</span>
  shopping_cart<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">,</span> price
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
  <span class="token function">calc_cart_total</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>after
<ul><li>호출하는 쪽은 전역변수를 인자로 넘기도록 고쳐 명시적인 입력으로 바꾼다.</li> <li><code>shopping_cart</code> 값을 바꾸는 대신 복사본을 만들고 복사본에 추가해 리턴해야 한다.
<ul><li>이와 같이 어떤 값을 바꿀 때 그 값을 복사해서 바꾸는 방법을 '카피-온-라이트'라고 하며 불변성을 구현하는 방법 중 하나이다. (추후 6장에서 더 자세히...)</li></ul></li> <li>그리고 자바스크립트에서는 배열을 직접 복사할 수 없어 이 예제에서는 <code>Array.prototype.slice()</code>와 같은 메서드를 사용했다.</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add_item_to_cart</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  shopping_cart <span class="token operator">=</span> <span class="token function">add_item</span><span class="token punctuation">(</span>shopping_cart<span class="token punctuation">,</span> name<span class="token punctuation">,</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">calc_cart_total</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">add_item</span><span class="token punctuation">(</span><span class="token parameter">cart<span class="token punctuation">,</span> name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> new_cart <span class="token operator">=</span> cart<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  new_cart<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">,</span> price
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> new_cart<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h2 id="_4-계산-추출을-단계별로-알아보기"><a href="#_4-계산-추출을-단계별로-알아보기" class="header-anchor">#</a> 4. 계산 추출을 단계별로 알아보기</h2> <h3 id="_1-계산-코드를-찾아-빼낸다"><a href="#_1-계산-코드를-찾아-빼낸다" class="header-anchor">#</a> (1) 계산 코드를 찾아 빼낸다.</h3> <ul><li>빼낼 코드를 찾고 코드를 추출해 새로운 함수를 만들어 리팩토링 한다.</li> <li>새 함수에 인자가 필요하다면 추가한다.</li> <li>원래 코드에서 빼낸 부분에서 새 함수를 부르도록 바꾼다.</li></ul> <br> <h3 id="_2-새-함수에-임묵적-입력과-출력을-찾는다"><a href="#_2-새-함수에-임묵적-입력과-출력을-찾는다" class="header-anchor">#</a> (2) 새 함수에 임묵적 입력과 출력을 찾는다.</h3> <ul><li>암묵적 출력은 함수를 부르는 동안 결과에 영향을 줄 수 있는 것을 말하고 암묵적 출력은 함수 호출의 결과로 영향을 받는 것을 말한다.</li> <li>입력
<ul><li>전역변수 읽는 행위</li> <li>데이터베이스에서 값을 가져오는 것</li></ul></li> <li>출력
<ul><li>console.log로 데이터 찍는 행위</li> <li>전역변수의 배열에 원소를 추가하는 행위</li> <li>전역변수를 바꾸는 행위</li> <li>공유 객체를 바꾸는 행위</li> <li>웹 요청을 보내는 것</li></ul></li></ul> <br> <h3 id="_3-암묵적-입력은-인자로-암묵적-출력은-리턴값으로-바꾼다"><a href="#_3-암묵적-입력은-인자로-암묵적-출력은-리턴값으로-바꾼다" class="header-anchor">#</a> (3) 암묵적 입력은 인자로 암묵적 출력은 리턴값으로 바꾼다.</h3> <ul><li>한 번에 하나씩 입력은 인자로 출력은 리턴값으로 바꾼다.</li> <li>새로운 리턴값이 생겼다면 호출하는 코드에서 함수의 결과를 변수에 할당해야 할 수도 있다.</li> <li>여기서 <b>인자와 리턴값은 바뀌지 않는 불변값이라는 것이 중요하다.</b></li> <li>리턴값이 나중에 바뀐다면 암묵적 출력이다.</li> <li>또 인자로 받은 값이 바뀔 수 있다면 암묵적 출력이다.</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 암묵적 출력이 적용된 예시</span>
<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">f1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><br> <h3 id="_5-p-79-연습-문제-내가-풀어본-방식"><a href="#_5-p-79-연습-문제-내가-풀어본-방식" class="header-anchor">#</a> 5. (p.79) 연습 문제 - 내가 풀어본 방식</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> shopping_cart_total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">calc_cart_total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  shopping_cart_total <span class="token operator">=</span> <span class="token function">calc_total</span><span class="token punctuation">(</span>shopping_cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">set_cart_total_dom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">update_shipping_icons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">update_tax_dom</span><span class="token punctuation">(</span>shopping_cart_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">update_tax_dom</span><span class="token punctuation">(</span><span class="token parameter">total</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> updated_shopping_cart_total <span class="token operator">=</span> <span class="token function">add_tax</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">set_tax_dom</span><span class="token punctuation">(</span>updated_shopping_cart_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">add_tax</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> price <span class="token operator">*</span> <span class="token number">0.10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h3 id="_6-p-82-연습-문제-내가-풀어본-방식"><a href="#_6-p-82-연습-문제-내가-풀어본-방식" class="header-anchor">#</a> 6. (p.82) 연습 문제 - 내가 풀어본 방식</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">calc_cart_total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  shopping_cart_total <span class="token operator">=</span> <span class="token function">calc_total</span><span class="token punctuation">(</span>shopping_cart<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token function">set_cart_total_dom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">update_shipping_icons</span><span class="token punctuation">(</span>shopping_cart_total<span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token function">update_tax_dom</span><span class="token punctuation">(</span>shopping_cart_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">updated_shipping_icons</span><span class="token punctuation">(</span><span class="token parameter">total</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> buy_buttons <span class="token operator">=</span> <span class="token function">get_buy_buttons_dom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> buy_buttons<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> button <span class="token operator">=</span> buy_buttons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> item <span class="token operator">=</span> buttom<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
      
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_free_shipping_item</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>price<span class="token punctuation">,</span> total<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      button<span class="token punctuation">.</span><span class="token function">show_free_shipping_icon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      button<span class="token punctuation">.</span><span class="token function">hide_free_shipping_icon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    
<span class="token keyword">function</span> <span class="token function">is_free_shipping_item</span><span class="token punctuation">(</span><span class="token parameter">price<span class="token punctuation">,</span> total</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> price <span class="token operator">+</span> total <span class="token operator">&gt;=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h2 id="정리"><a href="#정리" class="header-anchor">#</a> ❗️ 정리</h2> <ul><li>액션은 암묵적인 입력 또는 출력을 가지고 있다.</li> <li>계산의 정의에 따르면 계산은 암묵적인 입력이나 출력이 없어야 한다.</li> <li>공유 변수(전역변수 같은)는 일반적으로 암묵적 입력 또는 출력이 된다.</li> <li>암묵적 입력은 인자로 바꿀 수 있다.</li> <li>암묵적 출력은 리턴값으로 바꿀 수 있다.</li> <li>함수형 원칙을 적용하면 액션은 줄어들고 계산은 늘어난다.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/wally-wally-til/til/functional-coding/chapter03.html" class="prev">
        Chapter03
      </a></span> <span class="next"><a href="/wally-wally-til/til/functional-coding/chapter05.html">
        Chapter05
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/wally-wally-til/assets/js/app.f5246800.js" defer></script><script src="/wally-wally-til/assets/js/2.fd76ebd9.js" defer></script><script src="/wally-wally-til/assets/js/26.a467aa9c.js" defer></script>
  </body>
</html>
