<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>📄 Item29 ~ 33 | wally-wally TIL</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="wally-wally&#39;s TIL">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/wally-wally-til/assets/css/0.styles.5b0b7f0f.css" as="style"><link rel="preload" href="/wally-wally-til/assets/js/app.f5246800.js" as="script"><link rel="preload" href="/wally-wally-til/assets/js/2.fd76ebd9.js" as="script"><link rel="preload" href="/wally-wally-til/assets/js/17.872b0e5a.js" as="script"><link rel="prefetch" href="/wally-wally-til/assets/js/10.d9a95bfe.js"><link rel="prefetch" href="/wally-wally-til/assets/js/11.a2a6e0bb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/12.07ea1bdf.js"><link rel="prefetch" href="/wally-wally-til/assets/js/13.1bfbaa6f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/14.90ad19d6.js"><link rel="prefetch" href="/wally-wally-til/assets/js/15.f50c2694.js"><link rel="prefetch" href="/wally-wally-til/assets/js/16.85e8420c.js"><link rel="prefetch" href="/wally-wally-til/assets/js/18.f1794982.js"><link rel="prefetch" href="/wally-wally-til/assets/js/19.786141e4.js"><link rel="prefetch" href="/wally-wally-til/assets/js/20.88ff03b1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/21.fd903a51.js"><link rel="prefetch" href="/wally-wally-til/assets/js/22.d215abd1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/23.44ffc4f2.js"><link rel="prefetch" href="/wally-wally-til/assets/js/24.01293f45.js"><link rel="prefetch" href="/wally-wally-til/assets/js/25.3ef63158.js"><link rel="prefetch" href="/wally-wally-til/assets/js/26.a467aa9c.js"><link rel="prefetch" href="/wally-wally-til/assets/js/27.9e7ecb66.js"><link rel="prefetch" href="/wally-wally-til/assets/js/28.2ab87b73.js"><link rel="prefetch" href="/wally-wally-til/assets/js/29.4481ba0f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/3.c603572a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/30.19fd5f37.js"><link rel="prefetch" href="/wally-wally-til/assets/js/31.d5bfcc5a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/32.5ee24aeb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/33.11913056.js"><link rel="prefetch" href="/wally-wally-til/assets/js/34.31af5972.js"><link rel="prefetch" href="/wally-wally-til/assets/js/35.9ae3b57d.js"><link rel="prefetch" href="/wally-wally-til/assets/js/36.39511f04.js"><link rel="prefetch" href="/wally-wally-til/assets/js/37.298faa13.js"><link rel="prefetch" href="/wally-wally-til/assets/js/38.04a5a190.js"><link rel="prefetch" href="/wally-wally-til/assets/js/39.02659111.js"><link rel="prefetch" href="/wally-wally-til/assets/js/4.ed8f2e2d.js"><link rel="prefetch" href="/wally-wally-til/assets/js/40.e5fe29a8.js"><link rel="prefetch" href="/wally-wally-til/assets/js/41.2e0f3c4d.js"><link rel="prefetch" href="/wally-wally-til/assets/js/42.604fb7ae.js"><link rel="prefetch" href="/wally-wally-til/assets/js/43.7be3d9b4.js"><link rel="prefetch" href="/wally-wally-til/assets/js/44.6a25a594.js"><link rel="prefetch" href="/wally-wally-til/assets/js/45.3d5db9fb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/46.f541a5fe.js"><link rel="prefetch" href="/wally-wally-til/assets/js/47.493907b1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/48.8846fba8.js"><link rel="prefetch" href="/wally-wally-til/assets/js/49.180ec634.js"><link rel="prefetch" href="/wally-wally-til/assets/js/5.16508133.js"><link rel="prefetch" href="/wally-wally-til/assets/js/50.43c8c2f2.js"><link rel="prefetch" href="/wally-wally-til/assets/js/51.cf749cf9.js"><link rel="prefetch" href="/wally-wally-til/assets/js/52.99331d67.js"><link rel="prefetch" href="/wally-wally-til/assets/js/53.efc989ab.js"><link rel="prefetch" href="/wally-wally-til/assets/js/54.6d56ccbb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/55.0c06e067.js"><link rel="prefetch" href="/wally-wally-til/assets/js/56.b45e191a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/57.961440e9.js"><link rel="prefetch" href="/wally-wally-til/assets/js/58.a3d99037.js"><link rel="prefetch" href="/wally-wally-til/assets/js/59.55d3c672.js"><link rel="prefetch" href="/wally-wally-til/assets/js/6.c7b54f12.js"><link rel="prefetch" href="/wally-wally-til/assets/js/60.1eb9e815.js"><link rel="prefetch" href="/wally-wally-til/assets/js/61.60cf2957.js"><link rel="prefetch" href="/wally-wally-til/assets/js/62.060bd05f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/63.f005f9ad.js"><link rel="prefetch" href="/wally-wally-til/assets/js/64.a7d460aa.js"><link rel="prefetch" href="/wally-wally-til/assets/js/65.083b5915.js"><link rel="prefetch" href="/wally-wally-til/assets/js/66.3f31ca88.js"><link rel="prefetch" href="/wally-wally-til/assets/js/67.affe2987.js"><link rel="prefetch" href="/wally-wally-til/assets/js/68.58b01f3c.js"><link rel="prefetch" href="/wally-wally-til/assets/js/69.c7491bbb.js"><link rel="prefetch" href="/wally-wally-til/assets/js/7.233f38d3.js"><link rel="prefetch" href="/wally-wally-til/assets/js/70.9c9e05e7.js"><link rel="prefetch" href="/wally-wally-til/assets/js/71.67c4633a.js"><link rel="prefetch" href="/wally-wally-til/assets/js/72.66a1fbf9.js"><link rel="prefetch" href="/wally-wally-til/assets/js/73.cc121e7e.js"><link rel="prefetch" href="/wally-wally-til/assets/js/74.b71f297f.js"><link rel="prefetch" href="/wally-wally-til/assets/js/75.24c397b2.js"><link rel="prefetch" href="/wally-wally-til/assets/js/8.f792d4e1.js"><link rel="prefetch" href="/wally-wally-til/assets/js/9.897445a3.js">
    <link rel="stylesheet" href="/wally-wally-til/assets/css/0.styles.5b0b7f0f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wally-wally-til/" class="home-link router-link-active"><img src="/wally-wally-til/logo.png" alt="wally-wally TIL" class="logo"> <span class="site-name can-hide">wally-wally TIL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wally-wally-til/til/" class="nav-link router-link-active">
  TIL
</a></div><div class="nav-item"><a href="/wally-wally-til/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://wally-wally.kr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  wally-wally
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wally-wally-til/til/" class="nav-link router-link-active">
  TIL
</a></div><div class="nav-item"><a href="/wally-wally-til/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://wally-wally.kr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  wally-wally
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS Deep Dive</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Effective TypeScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wally-wally-til/til/effective-typescript/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/wally-wally-til/til/effective-typescript/item01-05.html" class="sidebar-link">Item01-05</a></li><li><a href="/wally-wally-til/til/effective-typescript/item06-10.html" class="sidebar-link">Item06-10</a></li><li><a href="/wally-wally-til/til/effective-typescript/item11-15.html" class="sidebar-link">Item11-15</a></li><li><a href="/wally-wally-til/til/effective-typescript/item16-18.html" class="sidebar-link">Item16-18</a></li><li><a href="/wally-wally-til/til/effective-typescript/item19-23.html" class="sidebar-link">Item19-23</a></li><li><a href="/wally-wally-til/til/effective-typescript/item24-28.html" class="sidebar-link">Item24-28</a></li><li><a href="/wally-wally-til/til/effective-typescript/item29-33.html" aria-current="page" class="active sidebar-link">Item29-33</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wally-wally-til/til/effective-typescript/item29-33.html#item29-사용할-때는-너그럽게-생성할-때는-엄격하게" class="sidebar-link">Item29. 사용할 때는 너그럽게, 생성할 때는 엄격하게</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/effective-typescript/item29-33.html#item30-문서에-타입-정보를-쓰지-않기" class="sidebar-link">Item30. 문서에 타입 정보를 쓰지 않기</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/effective-typescript/item29-33.html#item31-타입-주변에-null-값-배치하기" class="sidebar-link">Item31. 타입 주변에 null 값 배치하기</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/effective-typescript/item29-33.html#item32-유니온의-인터페이스보다는-인터페이스의-유니온을-사용하기" class="sidebar-link">Item32. 유니온의 인터페이스보다는 인터페이스의 유니온을 사용하기</a></li><li class="sidebar-sub-header"><a href="/wally-wally-til/til/effective-typescript/item29-33.html#item33-string-타입보다-더-구체적인-타입-사용하기" class="sidebar-link">Item33. string 타입보다 더 구체적인 타입 사용하기</a></li></ul></li><li><a href="/wally-wally-til/til/effective-typescript/item34-38.html" class="sidebar-link">Item34-38</a></li><li><a href="/wally-wally-til/til/effective-typescript/item39-43.html" class="sidebar-link">Item39-43</a></li><li><a href="/wally-wally-til/til/effective-typescript/item44-48.html" class="sidebar-link">Item44-48</a></li><li><a href="/wally-wally-til/til/effective-typescript/item49-51.html" class="sidebar-link">Item49-51</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Refactoring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Functional Coding</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="item29-33"><a href="#item29-33" class="header-anchor">#</a> 📄 Item29 ~ 33</h1> <br> <h2 id="item29-사용할-때는-너그럽게-생성할-때는-엄격하게"><a href="#item29-사용할-때는-너그럽게-생성할-때는-엄격하게" class="header-anchor">#</a> Item29. 사용할 때는 너그럽게, 생성할 때는 엄격하게</h2> <ul><li>함수의 매개변수는 타입의 범위가 넓어도 되지만, 결과를 반환할 때는 일반적으로 타입의 범위가 더 구체적이어야 한다.</li></ul> <hr> <ul><li>예시) 3D 매핑 API - 카메라의 위치를 지정하고 경계 박스의 뷰포트를 계산</li></ul> <h3 id="사용할-때는-너그럽게"><a href="#사용할-때는-너그럽게" class="header-anchor">#</a> ⭐️ 사용할 때는 너그럽게</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">setCamera</span><span class="token punctuation">(</span>camera<span class="token operator">:</span> CameraOptions<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">viewportForBounds</span><span class="token punctuation">(</span>bounds<span class="token operator">:</span> LngLatBounds<span class="token punctuation">)</span><span class="token operator">:</span> CameraOptions<span class="token punctuation">;</span>
</code></pre></div><ul><li>일부 값은 건드리지 않으면서 동시에 다른 값을 설정할 수 있어야 하므로 <code>CameraOptions</code>의 필드는 모두 선택적이다.</li> <li>게다가 <code>LngLat</code> 타입도 다양한 형테의 매개변수 타입을 정의하여 편의성을 제공하여 함수 호출을 쉽게 할 수 있다.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">CameraOptions</span> <span class="token punctuation">{</span>
  center<span class="token operator">?</span><span class="token operator">:</span> LngLat<span class="token punctuation">;</span>
  zoom<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  bearing<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  pitch<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">LngLat</span> <span class="token operator">=</span> <span class="token punctuation">{</span> lgn<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> lat<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> lon<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> lat<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>또한 <code>viewportForBounds</code> 함수는 위와 같은 자유로운 타입을 매개변수로 받는다.
<ul><li><code>LngLat</code> 타입과 조합하면 <code>LngLatBounds</code>의 가능한 형태는 19가지 이상으로 매우 자유로운 타입이다.</li></ul></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">LngLatBounds</span> <span class="token operator">=</span> <span class="token punctuation">{</span> northeast<span class="token operator">:</span> LngLat<span class="token punctuation">,</span> southwest<span class="token operator">:</span> LngLat <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">[</span>LngLat<span class="token punctuation">,</span> LngLat<span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><br> <h3 id="생성할-때는-엄격하게"><a href="#생성할-때는-엄격하게" class="header-anchor">#</a> ⭐️ 생성할 때는 엄격하게</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">focusOndFeature</span><span class="token punctuation">(</span>f<span class="token operator">:</span> Feature<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> bounds <span class="token operator">=</span> <span class="token function">calculateBoundingBox</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> camera <span class="token operator">=</span> <span class="token function">viewportForBounds</span><span class="token punctuation">(</span>bounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setCamera</span><span class="token punctuation">(</span>camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> center<span class="token operator">:</span> <span class="token punctuation">{</span> lat<span class="token punctuation">,</span> lng <span class="token punctuation">}</span><span class="token punctuation">,</span> zoom <span class="token punctuation">}</span> <span class="token operator">=</span> camera<span class="token punctuation">;</span>
  <span class="token comment">// ~~~ ... 형식에 'lat' 속성이 없습니다.</span>
  <span class="token comment">// ~~~ ... 형식에 'lng' 속성이 없습니다.</span>
  zoom<span class="token punctuation">;</span> <span class="token comment">// 타입이 number | undefined</span>
  window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?v=@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lat<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lng<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">z</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>zoom<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>위 오류는 <code>lat</code>, <code>lng</code> 속성이 없고 <code>zoom</code> 속성만 존재하여 발생했고, <code>zoom</code>의 타입이 <code>number | undefined</code>로 추론되는 것도 역시 문제다.</p></li> <li><p>근본적인 문제는 <code>viewportForBounds</code>의 타입 선언이 사용될 때뿐만 아니라 만들어질 때도 너무 자유롭다는 것이다.</p></li> <li><p><code>camera</code> 값을 안전한 타입으로 사용하는 유일한 방법은 <strong>유니온 타입의 각 요소별로 코드를 분기</strong>하는 것이다.</p></li> <li><p>유니온 타입의 요소별 분기를 위한 방법은 좌표를 위한 기본 형식을 구분하는 것이다.</p> <ul><li>배열과 배열 같은 것의 구분을 위해 <code>LngLat</code>와 <code>LngLatLike</code>를 구분할 수 있다.</li> <li>또한 <code>setCamera</code> 함수가 매개변수로 받을 수 있도록, 완전하게 정의된 <code>Camera</code> 타입과 <code>Camera</code> 타입이 부분적으로 정의된 버전을 구분할 수도 있다.</li></ul></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">LngLat</span> <span class="token punctuation">{</span>
  lng<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  lat<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">LngLatLike</span> <span class="token operator">=</span> LngLat <span class="token operator">|</span> <span class="token punctuation">{</span> lon<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> lat<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Camera</span> <span class="token punctuation">{</span>
  center<span class="token operator">:</span> LngLat<span class="token punctuation">;</span>
  zoom<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  bearing<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  pitch<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">CameraOptions</span> <span class="token keyword">extends</span> <span class="token class-name">Omit<span class="token operator">&lt;</span>Partial<span class="token operator">&lt;</span>Camera<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">'center'</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  center<span class="token operator">?</span><span class="token operator">:</span> LngLatLike<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">LngLatBounds</span> <span class="token operator">=</span> <span class="token punctuation">{</span> northeast<span class="token operator">:</span> LngLatLike<span class="token punctuation">,</span> southwest<span class="token operator">:</span> LngLatLike <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">[</span>LngLatLike<span class="token punctuation">,</span> LngLatLike<span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">setCamera</span><span class="token punctuation">(</span>camera<span class="token operator">:</span> CameraOptions<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">viewportForBounds</span><span class="token punctuation">(</span>bounds<span class="token operator">:</span> LngLatBounds<span class="token punctuation">)</span><span class="token operator">:</span> Camera<span class="token punctuation">;</span>
</code></pre></div><br> <h2 id="item30-문서에-타입-정보를-쓰지-않기"><a href="#item30-문서에-타입-정보를-쓰지-않기" class="header-anchor">#</a> Item30. 문서에 타입 정보를 쓰지 않기</h2> <ul><li>타입스크립트의 타입 구문 시스템은 간결하고, 구체적이며, 쉽게 읽을 수 있도록 설계되어있다.
<ul><li>함수의 입력과 출력의 타입을 코드로 표현하는 것이 주석보다 더 나은 방법이라는 것은 자명하다.</li></ul></li> <li>누군가 강제하지 않는 이상 주석ㅇ은 코드와 동기화되지 않는다.
<ul><li>주석 대신 타입 정보를 작성한다면 코드가 변경된다 하더라도 정보가 정확히 동기화된다.</li></ul></li> <li>특정 매개변수를 설명하고 싶다면 JSDoc의 <code>@param</code> 구문을 사용하면 된다.</li> <li>값을 변경하지 않는다고 설명하는 주석도 좋지 않다.
<ul><li>또한 매개변수르 변경하지 않는다는 주석도 사용하지 않는 것이 좋다.</li> <li>그 대신, <code>readonly</code>로 선언하여 타입스크립트가 규칙을 강제할 수 있게 하면 된다.</li></ul></li> <li>변수명에 타입 정보를 넣지 않도록 한다.
<ul><li>예를 들어 변수명 <code>ageNum</code>으로 하는 것보다는 <code>age</code>로 하고, 그 타입이 <code>number</code>임을 명시하는게 좋다.</li> <li>그러나 단위가 있는 숫자들은 예외이다. 단위가 무엇인지 확실하지 않다면 변수명 또는 속성 이름에 단위를 포함할 수 있다.</li></ul></li></ul> <hr> <ul><li><strong>주석과 변수명에 타입 정보를 적는 것은 피해야 한다.</strong> <ul><li>타입 선언이 중복되는 것으로 끝나면 다행이지만 최악의 경우는 타입 정보에 모순이 발생하게 된다.</li></ul></li> <li><strong>타입이 명확하지 않은 경우는 변수명에 단위 정보를 포함하는 것을 고려하는 것이 좋다.</strong> (예를 드러 <code>timeMs</code> 또는 <code>temperatureC</code>)</li></ul> <hr> <br> <h2 id="item31-타입-주변에-null-값-배치하기"><a href="#item31-타입-주변에-null-값-배치하기" class="header-anchor">#</a> Item31. 타입 주변에 <code>null</code> 값 배치하기</h2> <h3 id="예시1-숫자들의-최솟값과-최댓값-계산"><a href="#예시1-숫자들의-최솟값과-최댓값-계산" class="header-anchor">#</a> ⭐️ 예시1 . 숫자들의 최솟값과 최댓값 계산</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">extent</span><span class="token punctuation">(</span>nums<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> num <span class="token keyword">of</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> num<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> <span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
    
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 1) non-null assertion</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>min<span class="token punctuation">,</span> max<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">extent</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> span <span class="token operator">=</span> max <span class="token operator">-</span> min<span class="token punctuation">;</span> <span class="token comment">// 정상</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 2) if 구문으로 null check</span>
<span class="token keyword">const</span> range <span class="token operator">=</span> <span class="token function">extent</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>min<span class="token punctuation">,</span> max<span class="token punctuation">]</span> <span class="token operator">=</span> range<span class="token punctuation">;</span>
  <span class="token keyword">const</span> span <span class="token operator">=</span> max <span class="token operator">-</span> min<span class="token punctuation">;</span> <span class="token comment">// 정상</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h3 id="예시2-사용자의-포럼-게시글을-나타내는-클래스"><a href="#예시2-사용자의-포럼-게시글을-나타내는-클래스" class="header-anchor">#</a> ⭐️ 예시2. 사용자의 포럼 게시글을 나타내는 클래스</h3> <ul><li>아래와 같이 <code>init</code> 메소드를 구성하면 <code>null</code>의 존재 유무에 따라 네 가지 상태가 존재하여 <code>null</code> 체크가 난무하고 버그를 양산하게 된다.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">UserPosts</span> <span class="token punctuation">{</span>
  user<span class="token operator">:</span> UserInfo <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  posts<span class="token operator">:</span> Post<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>posts <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    
  <span class="token keyword">async</span> <span class="token function">init</span><span class="token punctuation">(</span>userId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>users <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>posts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchPostsForUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    
  <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>필요한 데이터가 모두 준비된 후에 클래스를 만들도록 바꿔보자.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">UserPosts</span> <span class="token punctuation">{</span>
  user<span class="token operator">:</span> UserInfo<span class="token punctuation">;</span>
  posts<span class="token operator">:</span> Post<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
  <span class="token function">constructor</span><span class="token punctuation">(</span>user<span class="token operator">:</span> UserInfo<span class="token punctuation">,</span> posts<span class="token operator">:</span> Posts<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> user<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>posts <span class="token operator">=</span> posts<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">init</span><span class="token punctuation">(</span>userId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>UserPosts<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> posts<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">fetchUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">fetchPostsForUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserPosts</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> posts<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    
  <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="결론"><a href="#결론" class="header-anchor">#</a> 💡 결론</h3> <ul><li>한 값의 <code>null</code> 여부가 다른 값의 <code>null</code> 여부에 암시적으로 관련되도록 설계하면 안 된다.</li> <li>API 작성 시에는 반환 타입을 큰 객체로 만들고 반환 타입 전체가 <code>null</code> 이거나 <code>null</code>이 아니게 만들어야 한다.</li> <li>클래스를 만들 때는 필요한 모든 값이 준비되었을 때 생성하여 <code>null</code>이 존재하지 않도록 하는 것이 좋다.</li> <li><code>strictNullChecks</code> 를 설정하면 코드에 많은 오류가 표시되겠지만, <code>null</code> 값과 관련된 문제점을 찾아낼 수 있기 때문에 반드시 필요하다.</li></ul> <hr> <br> <h2 id="item32-유니온의-인터페이스보다는-인터페이스의-유니온을-사용하기"><a href="#item32-유니온의-인터페이스보다는-인터페이스의-유니온을-사용하기" class="header-anchor">#</a> Item32. 유니온의 인터페이스보다는 인터페이스의 유니온을 사용하기</h2> <ul><li>태그된 유니온에서 인터페이스의 유니온 패턴 적용하기</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">FillLayer</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'fill'</span><span class="token punctuation">;</span>
  layout<span class="token operator">:</span> FillLayout<span class="token punctuation">;</span>
  paint<span class="token operator">:</span> FillPaint<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">LineLayer</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'line'</span><span class="token punctuation">;</span>
  layout<span class="token operator">:</span> LineLayout<span class="token punctuation">;</span>
  paint<span class="token operator">:</span> LinePaint<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Layer</span> <span class="token operator">=</span> FillLayer <span class="token operator">|</span> LineLayer<span class="token punctuation">;</span>
</code></pre></div><ul><li><code>type</code> 속성은 '태그' 이며 런타임에 어떤 타입의 <code>Layer</code>가 사용되는지 판단하는 데 쓰인다.
<ul><li>타입스크립트는 태그를 참고하여 <code>Layer</code>의 타입의 범위를 좁힐 수도 있다.</li></ul></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">drawLayer</span><span class="token punctuation">(</span>layer<span class="token operator">:</span> Layer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>layer<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'fill'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> paint <span class="token punctuation">}</span> <span class="token operator">=</span> layer<span class="token punctuation">;</span> <span class="token comment">// 타입이 FillPaint</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> layout <span class="token punctuation">}</span> <span class="token operator">=</span> layer<span class="token punctuation">;</span> <span class="token comment">// 타입이 FillLayout</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> paint <span class="token punctuation">}</span> <span class="token operator">=</span> layer<span class="token punctuation">;</span> <span class="token comment">// 타입이 LinePaint</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> layout <span class="token punctuation">}</span> <span class="token operator">=</span> layer<span class="token punctuation">;</span> <span class="token comment">// 타입이 LineLayout</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>타입의 구조를 손 댈 수 없는 상황에서도 이 기법을 이용해서 속성 사이의 관계를 모델링할 수 있다.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">PersonWithBirth</span> <span class="token keyword">extends</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span>
  placeOfBirth<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  dateOfBirth<span class="token operator">:</span> Date<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> Name <span class="token operator">|</span> PersonWithBirth<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">eulogize</span><span class="token punctuation">(</span>p<span class="token operator">:</span> Person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'placeOfBirth'</span> <span class="token keyword">of</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    p<span class="token punctuation">;</span> <span class="token comment">// 타입이 PersonWithBirth</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> dateOfBirth <span class="token punctuation">}</span> <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment">// 정상, 타입이 Date</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>또는 두 개의 옵셔널한 속성을 하나의 객체로 모아서 설계할 수도 있다.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  birth<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    place<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    date<span class="token operator">:</span> Date<span class="token punctuation">;</span>s
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h2 id="item33-string-타입보다-더-구체적인-타입-사용하기"><a href="#item33-string-타입보다-더-구체적인-타입-사용하기" class="header-anchor">#</a> Item33. <code>string</code> 타입보다 더 구체적인 타입 사용하기</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">RecordingType</span> <span class="token operator">=</span> <span class="token string">'studio'</span> <span class="token operator">|</span> <span class="token string">'live'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Album</span> <span class="token punctuation">{</span>
  artist<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  releaseDate<span class="token operator">:</span> Date<span class="token punctuation">;</span>
  recordingTpye<span class="token operator">:</span> RecordingType<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> kindOfBlue<span class="token operator">:</span> Album <span class="token operator">=</span> <span class="token punctuation">{</span>
  artist<span class="token operator">:</span> <span class="token string">'Miles Davis'</span><span class="token punctuation">,</span>
  title<span class="token operator">:</span> <span class="token string">'Kind of Blue'</span><span class="token punctuation">,</span>
  releaseDate<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'1959-08-17'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  recordingType<span class="token operator">:</span> <span class="token string">'Studio'</span><span class="token punctuation">,</span> <span class="token comment">// '&quot;Studio&quot;' 형식은 'RecordingType' 형식에 할당할 수 없습니다.</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>string</code> 타입보다 더 구체적인 타입을 사용했을 때의 장점
<ul><li>타입을 명시적으로 정의함으로써 다른 곳으로 값이 전달되어도 타입 정보가 유지된다.</li> <li>타입을 명시적으로 정의하고 해당 타입의 의미를 설명하는 주석을 붙여 넣을 수 있다.</li> <li><code>keyof</code> 연산자로 더욱 세밀하게 객체의 속성 체크가 가능해진다.</li></ul></li></ul> <br> <h3 id="keyof-연산자"><a href="#keyof-연산자" class="header-anchor">#</a> ⭐️ <code>keyof</code> 연산자</h3> <ul><li>우선 예시로 underscore의 <code>pluck</code> 함수를 살펴보자</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">pluck</span><span class="token punctuation">(</span>records<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> records<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>타입 체크는 되나 <code>any</code> 타입으로 인해 정밀하지 못하다. 그래서 첫 번째 단계로 제네릭을 이용하여 타입 시그니처를 개선해보자.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">pluck</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>records<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> records<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ~~~ '{}' 형식에 인덱스 시그니처가 없으므로 요소에 암식적으로 'any' 형식이 있습니다.</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>key</code>의 타입이 <code>string</code> 이여서 범위가 넓다는 오류를 발생시킨다.</li> <li>그래서 <code>keyof</code> 연산자를 이용해서 유효한 값을 지정해보자.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">K</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Album<span class="token punctuation">;</span> <span class="token comment">// 타입이 &quot;artist&quot; | &quot;title&quot; | &quot;releaseDate&quot; | &quot;recordingType&quot;</span>

<span class="token comment">// T[keyof T]는 T 객체 내의 가능한 모든 값의 타입이다.ㄴ</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">pluck</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>records<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> records<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>하지만 아래와 같은 경우 <code>key</code>의 값으로 하나의 문자열을 넣게 되면, 그 범위가 너무 넓어서 적절한 타입이라고 보기 어려운 경우도 있다.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> releaseDates <span class="token operator">=</span> <span class="token function">pluck</span><span class="token punctuation">(</span>albums<span class="token punctuation">,</span> <span class="token string">'releaseDate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 타입이 (string | Date)[]</span>
</code></pre></div><ul><li>범위를 더 좁히기 위해, <code>keyof T</code>의 부분 집합으로 두 번째 제네릭 매개변수를 도입해야 한다.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">pluck</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>records<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> records<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">pluck</span><span class="token punctuation">(</span>albums<span class="token punctuation">,</span> <span class="token string">'releaseDate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 타입이 Date[]</span>
<span class="token function">pluck</span><span class="token punctuation">(</span>albums<span class="token punctuation">,</span> <span class="token string">'artist'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 타입이 string[]</span>
<span class="token function">pluck</span><span class="token punctuation">(</span>albums<span class="token punctuation">,</span> <span class="token string">'recordingType'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 타입이 RecordingType[]</span>
<span class="token function">pluck</span><span class="token punctuation">(</span>albums<span class="token punctuation">,</span> <span class="token string">'recordingDate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ~~~ '&quot;recordingDate&quot;' 형식의 인수는 ... 형식의 매개변수에 할당될 수 없습니다.</span>
</code></pre></div><br> <hr> <h3 id="결론-2"><a href="#결론-2" class="header-anchor">#</a> 💡 결론</h3> <ul><li><code>string</code>은 <code>any</code>와 비슷한 문제를 가지고 있다.
<ul><li>따라서 잘못 사용하게 되면 무효한 값을 허용하고 타입 간의 관계도 감추어 버린다.</li> <li>이러한 문제점은 타입 체커를 방해하고 실제 버그를 찾지 못하게 만든다.</li></ul></li> <li>변수의 범위를 보다 정확하게 표현하고 싶다면 <code>string</code> 타입보다는 문자열 리터럴 타입의 유니온을 사용하면 된다.
<ul><li>타입 체크를 더 엄격히 할 수 있고 생산성을 향상시킬 수 있다.</li></ul></li> <li>객체의 속성 이름을 함수 매개변수로 받을 때는 <code>string</code> 보다는 <code>keyof T</code>를 사용하는 것이 좋다.</li></ul> <hr></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/wally-wally-til/til/effective-typescript/item24-28.html" class="prev">
        Item24-28
      </a></span> <span class="next"><a href="/wally-wally-til/til/effective-typescript/item34-38.html">
        Item34-38
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/wally-wally-til/assets/js/app.f5246800.js" defer></script><script src="/wally-wally-til/assets/js/2.fd76ebd9.js" defer></script><script src="/wally-wally-til/assets/js/17.872b0e5a.js" defer></script>
  </body>
</html>
